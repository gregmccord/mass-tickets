(this["webpackJsonpmass-tickets"]=this["webpackJsonpmass-tickets"]||[]).push([[0],{25:function(e,t,n){e.exports=n(47)},30:function(e,t,n){},44:function(e,t,n){},47:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(7),c=n.n(o),l=(n(30),n(11)),s=n.n(l),i=n(15),u=n(8),m=n(10),p=n(6),f=n(12),d=n(23),E=n(22),h=n.n(E);n(44),n(45);var b=function(){var e=Object(a.useState)(!1),t=Object(u.a)(e,2),n=t[0],o=t[1],c=Object(a.useState)("---"),l=Object(u.a)(c,2),E=l[0],b=l[1],v=Object(a.useState)("---"),g=Object(u.a)(v,2),j=g[0],y=g[1],k=Object(a.useState)(""),O=Object(u.a)(k,2),S=O[0],w=O[1],C=Object(a.useState)(!1),N=Object(u.a)(C,2),A=N[0],T=N[1],x=Object(a.useState)(null),I=Object(u.a)(x,2),z=I[0],B=I[1],G=Object(a.useState)(null),L=Object(u.a)(G,2),M=L[0],P=L[1],R=Object(a.useState)(null),W=Object(u.a)(R,2),q=(W[0],W[1]),D=Object(a.useState)(!1),H=Object(u.a)(D,2),J=H[0],Z=H[1];Object(a.useEffect)((function(){function e(){return(e=Object(i.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:fetch("/getNumTickets").then((function(e){return e.json()})).then((function(e){B(e.tickets),P(e.days)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(a.useEffect)((function(){J&&function(){var e=Object(i.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/getPrevTickets?mass_day_time="+E+"&email="+S).then((function(e){return e.json()}));case 2:t=e.sent,q(t.tickets),t.tickets.length>0?$():K();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[J]);var $=function(){return T(!0)},_=function(){T(!1),Z(!1)};function F(){for(var e in z[E])if(z[E][e]>0)return!0;return!1}function K(){console.log("New!"),Z(!1)}return r.a.createElement(h.a,{active:J,spinner:!0,text:"Processing Request..."},r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},"St. Mary's of the Assumption Mass Ticket App"),r.a.createElement("div",{className:"App-Body"},(null===z||null===M)&&r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement(d.a,{animation:"border",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading..."))),null!==z&&null!==M&&r.a.createElement(p.a,{className:"Request-ticket"},r.a.createElement(p.a.Group,{controlId:"MassDayTime"},r.a.createElement(p.a.Label,null,"Mass Day/Time"),r.a.createElement(p.a.Control,{as:"select",onChange:function(e){return b(e.target.value)}},r.a.createElement("option",null,"---"),M.map((function(e,t){return r.a.createElement("option",{key:t},e)})))),!F()&&"---"!==E&&r.a.createElement("div",null,"There are no spots remaining for this mass."),F()&&"---"!==E&&r.a.createElement("div",null,r.a.createElement("div",null,function(){var e="";return e+="Spots remaining for 1-2 people: "+z[E]["1-2"]+"\n",e+="Spots remaining for 3-4 people: "+z[E]["3-4"]+"\n",e+="Spots remaining for 5-6 people: "+z[E]["5-6"]+"\n",e+="\n"}()),r.a.createElement(p.a.Group,{controlId:"Email",size:"lg"},r.a.createElement(p.a.Label,null,"Email Address"),r.a.createElement(p.a.Control,{placeholder:"name@example.com",value:S,onChange:function(e){return w(e.target.value)},type:"email"})),r.a.createElement(p.a.Group,{controlId:"NumberPeople"},r.a.createElement(p.a.Label,null,"Select Number of People"),r.a.createElement(p.a.Control,{as:"select",value:j,onChange:function(e){return y(e.target.value)}},r.a.createElement("option",null,"---"),r.a.createElement("option",null,"1-2"),r.a.createElement("option",null,"3-4"),r.a.createElement("option",null,"5-6")))),"---"!==E&&z[E][j]<=0&&"---"!==y&&F()&&r.a.createElement("div",{className:"Selection-Alert"},"***There are no spots remaining for ",j," people at this mass. Please select a dfferent group size or a different mass."),"---"!==E&&"---"!==j&&(z[E][j]>0&&function(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())}(S)?(n||o(!0),!0):(n&&o(!1),!1))&&r.a.createElement(p.a.Group,null,r.a.createElement(f.a,{block:!0,size:"lg",type:"button",onClick:function(){Z(!0)}},"Get Ticket")))),r.a.createElement(m.a,{show:A,onHide:_},r.a.createElement(m.a.Header,{closeButton:!0},r.a.createElement(m.a.Title,null,"Alert")),r.a.createElement(m.a.Body,null,"We see that you have already signed up for this mass with this email address. If you need an additional ticket, press Confirm. If you need us to re-send your ticket(s), press Re-send."),r.a.createElement(m.a.Footer,null,r.a.createElement(f.a,{variant:"secondary",onClick:_},"Close"),r.a.createElement(f.a,{variant:"primary",onClick:function(){T(!1),console.log("Old!"),Z(!1)}},"Re-send"),r.a.createElement(f.a,{variant:"primary",onClick:function(){T(!1),K()}},"Confirm")))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(b,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[25,1,2]]]);
//# sourceMappingURL=main.4f8f0cb6.chunk.js.map