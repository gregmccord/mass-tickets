(this["webpackJsonpmass-tickets"]=this["webpackJsonpmass-tickets"]||[]).push([[0],{19:function(e,t,a){e.exports=a(31)},24:function(e,t,a){},26:function(e,t,a){},31:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(9),l=a.n(o),c=(a(24),a(11)),s=a.n(c),i=a(14),u=a(7),m=a(10),p=a(6),f=a(12),d=a(15);a(26),a(27);var E=function(){var e=Object(n.useState)(!1),t=Object(u.a)(e,2),a=t[0],o=t[1],l=Object(n.useState)("---"),c=Object(u.a)(l,2),E=c[0],h=c[1],b=Object(n.useState)("---"),v=Object(u.a)(b,2),g=v[0],y=v[1],j=Object(n.useState)(""),k=Object(u.a)(j,2),O=k[0],S=k[1],w=Object(n.useState)(!1),C=Object(u.a)(w,2),N=C[0],A=C[1],T=Object(n.useState)(null),x=Object(u.a)(T,2),I=x[0],L=x[1],z=Object(n.useState)(null),B=Object(u.a)(z,2),G=B[0],M=B[1],P=Object(n.useState)(null),R=Object(u.a)(P,2),W=(R[0],R[1]),D=Object(n.useState)(!1),H=Object(u.a)(D,2),J=H[0],Z=H[1];Object(n.useEffect)((function(){function e(){return(e=Object(i.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:fetch("/getNumTickets").then((function(e){return e.json()})).then((function(e){L(e.tickets),M(e.days)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(n.useEffect)((function(){J&&function(){var e=Object(i.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/getPrevTickets?mass_day_time="+E+"&email="+O).then((function(e){return e.json()}));case 2:t=e.sent,W(t.tickets),t.tickets.length>0?$():F();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[J]);var $=function(){return A(!0)},_=function(){A(!1),Z(!1)};function q(){for(var e in I[E])if(I[E][e]>0)return!0;return!1}function F(){console.log("New!"),Z(!1)}return r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},"St. Mary's of the Assumption Mass Ticket App"),r.a.createElement("div",{className:"App-Body"},(null===I||null===G)&&r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement(d.a,{animation:"border",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading..."))),null!==I&&null!==G&&r.a.createElement(p.a,{className:"Request-ticket"},r.a.createElement(p.a.Group,{controlId:"MassDayTime"},r.a.createElement(p.a.Label,null,"Mass Day/Time"),r.a.createElement(p.a.Control,{as:"select",onChange:function(e){return h(e.target.value)}},r.a.createElement("option",null,"---"),G.map((function(e,t){return r.a.createElement("option",{key:t},e)})))),!q()&&"---"!==E&&r.a.createElement("div",null,"There are no spots remaining for this mass."),q()&&"---"!==E&&r.a.createElement("div",null,r.a.createElement("div",null,function(){var e="";return e+="Spots remaining for 1-2 people: "+I[E]["1-2"]+"\n",e+="Spots remaining for 3-4 people: "+I[E]["3-4"]+"\n",e+="Spots remaining for 5-6 people: "+I[E]["5-6"]+"\n",e+="\n"}()),r.a.createElement(p.a.Group,{controlId:"Email",size:"lg"},r.a.createElement(p.a.Label,null,"Email Address"),r.a.createElement(p.a.Control,{placeholder:"name@example.com",value:O,onChange:function(e){return S(e.target.value)},type:"email"})),r.a.createElement(p.a.Group,{controlId:"NumberPeople"},r.a.createElement(p.a.Label,null,"Select Number of People"),r.a.createElement(p.a.Control,{as:"select",value:g,onChange:function(e){return y(e.target.value)}},r.a.createElement("option",null,"---"),r.a.createElement("option",null,"1-2"),r.a.createElement("option",null,"3-4"),r.a.createElement("option",null,"5-6")))),"---"!==E&&I[E][g]<=0&&"---"!==y&&q()&&r.a.createElement("div",{className:"Selection-Alert"},"***There are no spots remaining for ",g," people at this mass. Please select a dfferent group size or a different mass."),"---"!==E&&"---"!==g&&(I[E][g]>0&&function(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())}(O)?(a||o(!0),!0):(a&&o(!1),!1))&&r.a.createElement(p.a.Group,null,r.a.createElement(f.a,{block:!0,size:"lg",type:"button",onClick:function(){Z(!0)}},"Get Ticket"))),J&&r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement(d.a,{animation:"border",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading...")))),r.a.createElement(m.a,{show:N,onHide:_},r.a.createElement(m.a.Header,{closeButton:!0},r.a.createElement(m.a.Title,null,"Alert")),r.a.createElement(m.a.Body,null,"We see that you have already signed up for this mass with this email address. If you need an additional ticket, press Confirm. If you need us to re-send your ticket(s), press Re-send."),r.a.createElement(m.a.Footer,null,r.a.createElement(f.a,{variant:"secondary",onClick:_},"Close"),r.a.createElement(f.a,{variant:"primary",onClick:function(){A(!1),console.log("Old!"),Z(!1)}},"Re-send"),r.a.createElement(f.a,{variant:"primary",onClick:function(){A(!1),F()}},"Confirm"))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(E,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[19,1,2]]]);
//# sourceMappingURL=main.9a38ccda.chunk.js.map